package com.example.ndk;

import java.io.BufferedReader;
import java.io.DataOutputStream;
import java.io.InputStreamReader;

import android.app.Activity;
import android.os.Bundle;
import android.widget.Toast;

public class MainActivity extends Activity {

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);

		Toast.makeText(getApplicationContext(), getOs(), 0).show();
		String runinwhereString = isrunninginEmualtor();

	}

	// 查询os
	public String getOs() {
		String os = System.getProperty("os.name").substring(0, 3);

		// kdfgh
		return os;
	}

	// 查询是否在模拟器中运行
	public String isrunninginEmualtor() {
		Process ps = null;
		DataOutputStream doStream = null;
		try {
			ps = Runtime.getRuntime().exec("getprop ro.kernel.qemu");
			// 执行getprop
			doStream=new DataOutputStream(ps.getOutputStream());
			BufferedReader inBufferedReader=new BufferedReader(new InputStreamReader(ps.getInputStream()));
			doStream.writeByte("exit\n");

		} catch (Exception e) {
			// TODO: handle exception
		}
		return "22";

	}

}
